<?xml version="1.0" encoding="UTF-8" ?>
<!--
{# $SourceFileURL$ #}
Templated by Conifer using
{{ template_path }}
with vars from
Cohort: {{ cohort }}
Project: {{ project }}
Environment: {{ env|default() }}
site_vars file: {{ site_vars }}
-->

<modelConfig modelName="{{ modelconfig_modelName }}"
             webServiceUrl="{{ modelconfig_webServiceUrl }}"
             smtpServer="{{ modelconfig_smtpServer }}"
             supportEmail="{{ modelconfig_supportEmail }}"
             {% if modelconfig_adminEmail is defined -%}
             adminEmail="
              {%- if modelconfig_adminEmail is string -%}
                {{ modelconfig_adminEmail }}
              {%- elif modelconfig_adminEmail is iterable -%}
                {{ modelconfig_adminEmail|join(', ') }}
              {%- endif -%}
              "
             {% endif -%}
             {% if modelconfig_assetsUrl is defined -%}
             assetsUrl="{{ modelconfig_assetsUrl }}"
             {% endif -%}
             {% if modelconfig_useWeights is defined -%}
             assetsUrl="{{ modelconfig_useWeights }}"
             {% endif -%}
             {% if modelconfig_secretKeyFile is defined -%}
             secretKeyFile="{{ modelconfig_secretKeyFile }}"
             {% endif -%}
             {% if modelconfig_blockedThreshold is defined -%}
             monitorBlockedThreads="{{ modelconfig_monitorBlockedThreads }}"
             {% endif -%}
             {% if modelconfig_blockedThreshold is defined -%}
             blockedThreshold="{{ modelconfig_blockedThreshold }}"
             {% endif -%}

             {% if modelconfig_authenticationMethod is defined -%}
             authenticationMethod="{{ modelconfig_authenticationMethod }}"
             {% if modelconfig_authenticationMethod == 'oauth2' -%}
             oauthUrl="{{ modelconfig_oauthUrl }}"
             oauthClientId="{{ modelconfig_oauthClientId }}"
             oauthClientSecret="{{ modelconfig_oauthClientSecret }}"
             changePasswordUrl="{{ modelconfig_changePasswordUrl }}"
             {% endif -%}
             {% endif -%}

             {% if modelconfig_keyStoreFile is defined -%}
             keyStoreFile="{{ modelconfig_keyStoreFile }}"
             keyStorePassPhrase="{{ modelconfig_keyStorePassPhrase }}"
             {% endif -%}

             wdkTempDir="{{ modelconfig_wdkTempDir }}"
             >

    <queryMonitor
             {% if modelconfig_queryMonitor_baseline is defined -%}
             baseline="{{ modelconfig_queryMonitor_baseline }}"
             {% endif -%}
             {% if modelconfig_queryMonitor_slow is defined -%}
             slow="{{ modelconfig_queryMonitor_slow }}"
             {% endif -%}
             {% if modelconfig_queryMonitor_ignoreSlowRegex is defined -%}
             slow="{{ modelconfig_queryMonitor_ignoreSlowRegex }}"
             {% endif -%}
             {% if modelconfig_queryMonitor_ignoreBaselineRegex is defined -%}
             slow="{{ modelconfig_queryMonitor_ignoreBaselineRegex }}"
             {% endif -%}
    />

    <appDb  login="{{ modelconfig_appDb_login }}"
            password="{{ modelconfig_appDb_password }}"
            userDbLink="{{ modelconfig_appDb_userDbLink }}"
            acctDbLink="{{ modelconfig_appDb_acctDbLink }}"
            <!-- optional attributes -->
            {% if modelconfig_appDb_connectionUrl is defined -%}
            connectionUrl="{{ modelconfig_appDb_connectionUrl }}"
            {% endif -%}
            {% if modelconfig_appDb_platform is defined -%}
            platform="{{ modelconfig_appDb_platform }}"
            {% endif -%}
            {% if modelconfig_appDb_ldapServer is defined -%}
            ldapServer="{{ modelconfig_appDb_ldapServer }}"
            {% endif -%}
            {% if modelconfig_appDb_ldapBaseDn is defined -%}
            ldapBaseDn="{{ modelconfig_appDb_ldapBaseDn }}"
            {% endif -%}
            {% if modelconfig_appDb_ldapCommonName is defined -%}
            ldapCommonName="{{ modelconfig_appDb_ldapCommonName }}"
            {% endif -%}
            {% if modelconfig_appDb_dbIdentifier is defined -%}
            dbIdentifier="{{ modelconfig_appDb_dbIdentifier }}"
            {% endif -%}
            {% if modelconfig_appDb_dbHost is defined -%}
            dbHost="{{ modelconfig_appDb_dbHost }}"
            {% endif -%}
            {% if modelconfig_appDb_dbPort is defined -%}
            dbPort="{{ modelconfig_appDb_dbPort }}"
            {% endif -%}
            {% if modelconfig_appDb_maxActive is defined -%}
            maxActive="{{ modelconfig_appDb_maxActive }}"
            {% endif -%}
            {% if modelconfig_appDb_maxIdle is defined -%}
            maxIdle="{{ modelconfig_appDb_maxIdle }}"
            {% endif -%}
            {% if modelconfig_appDb_minIdle is defined -%}
            minIdle="{{ modelconfig_appDb_minIdle }}"
            {% endif -%}
            {% if modelconfig_appDb_maxWait is defined -%}
            maxWait="{{ modelconfig_appDb_maxWait }}"
            {% endif -%}
            {% if modelconfig_appDb_defaultFetchSize is defined -%}
            defaultFetchSize="{{ modelconfig_appDb_defaultFetchSize }}"
            {% endif -%}
            {% if modelconfig_appDb_showConnections is defined -%}
            showConnections="{{ modelconfig_appDb_showConnections }}"
            {% endif -%}
            {% if modelconfig_appDb_showConnectionsInterval is defined -%}
            showConnectionsInterval="{{ modelconfig_appDb_showConnectionsInterval }}"
            {% endif -%}
            {% if modelconfig_appDb_showConnectionsDuration is defined -%}
            showConnectionsDuration="{{ modelconfig_appDb_showConnectionsDuration }}"
            {% endif -%}
            {% if modelconfig_appDb_maxPkColumnWidth is defined -%}
            maxPkColumnWidth="{{ modelconfig_appDb_maxPkColumnWidth }}"
            {% endif -%}
            {% if modelconfig_appDb_driverInitClass is defined -%}
            driverInitClass="{{ modelconfig_appDb_driverInitClass }}"
            {% endif -%}
    />

    <userDb login="{{ modelconfig_userDb_login }}"
            password="{{ modelconfig_userDb_password }}"
            userSchema="{{ modelconfig_userDb_userSchema }}"
            <!-- optional attributes -->
            {% if modelconfig_userDb_connectionUrl is defined -%}
            connectionUrl="{{ modelconfig_userDb_connectionUrl }}"
            {% endif -%}
            {% if modelconfig_userDb_platform is defined -%}
            platform="{{ modelconfig_userDb_platform }}"
            {% endif -%}
            {% if modelconfig_userDb_ldapServer is defined -%}
            ldapServer="{{ modelconfig_userDb_ldapServer }}"
            {% endif -%}
            {% if modelconfig_userDb_ldapBaseDn is defined -%}
            ldapBaseDn="{{ modelconfig_userDb_ldapBaseDn }}"
            {% endif -%}
            {% if modelconfig_userDb_ldapCommonName is defined -%}
            ldapCommonName="{{ modelconfig_userDb_ldapCommonName }}"
            {% endif -%}
            {% if modelconfig_userDb_dbIdentifier is defined -%}
            dbIdentifier="{{ modelconfig_userDb_dbIdentifier }}"
            {% endif -%}
            {% if modelconfig_userDb_dbHost is defined -%}
            dbHost="{{ modelconfig_userDb_dbHost }}"
            {% endif -%}
            {% if modelconfig_userDb_dbPort is defined -%}
            dbPort="{{ modelconfig_userDb_dbPort }}"
            {% endif -%}
            {% if modelconfig_userDb_maxActive is defined -%}
            maxActive="{{ modelconfig_userDb_maxActive }}"
            {% endif -%}
            {% if modelconfig_userDb_minIdle is defined -%}
            maxIdle="{{ modelconfig_userDb_maxIdle }}"
            {% endif -%}
            {% if modelconfig_userDb_minIdle is defined -%}
            minIdle="{{ modelconfig_userDb_minIdle }}"
            {% endif -%}
            {% if modelconfig_userDb_maxWait is defined -%}
            maxWait="{{ modelconfig_userDb_maxWait }}"
            {% endif -%}
            {% if modelconfig_userDb_defaultFetchSize is defined -%}
            defaultFetchSize="{{ modelconfig_userDb_defaultFetchSize }}"
            {% endif -%}
            {% if modelconfig_userDb_showConnections is defined -%}
            showConnections="{{ modelconfig_userDb_showConnections }}"
            {% endif -%}
            {% if modelconfig_userDb_showConnectionsInterval is defined -%}
            showConnectionsInterval="{{ modelconfig_userDb_showConnectionsInterval }}"
            {% endif -%}
            {% if modelconfig_userDb_showConnectionsDuration is defined -%}
            showConnectionsDuration="{{ modelconfig_userDb_showConnectionsDuration }}"
            {% endif -%}
            {% if modelconfig_userDb_driverInitClass is defined -%}
            driverInitClass="{{ modelconfig_userDb_driverInitClass }}"
            {% endif -%}
    />

    <emailSubject>
      {{ modelconfig_emailSubject|indent(6) }}
    </emailSubject>

    <emailContent>
      {{ modelconfig_emailContent|indent(6) }}
    </emailContent>
</modelConfig>
